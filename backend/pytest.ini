[pytest]
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
testpaths = tests
addopts =
    -v
    --tb=short
    --strict-markers
    -o log_cli=true
    -o log_cli_level=INFO
    -rA
    --full-trace
markers =
    asyncio: 异步测试标记
    anyio: anyio框架标记
    slow: 长时运行测试（可通过 -m \"not slow\" 跳过）
    integration: 集成测试（使用真实数据库）
    e2e: 端到端测试（完整流程）
filterwarnings =
    ignore::DeprecationWarning:pkg_resources
    ignore::pytest.PytestUnraisableExceptionWarning
    ignore::RuntimeWarning:asyncio
