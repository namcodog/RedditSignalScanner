# Reddit Signal Scanner - ç¯å¢ƒé…ç½®å®Œå…¨æŒ‡å—

> **åˆ›å»ºæ—¥æœŸ**: 2025-10-10
> **ç”¨é€”**: å¼€å‘ç¯å¢ƒä¸€ç«™å¼é…ç½®æŒ‡å—
> **é€‚ç”¨åœºæ™¯**: æ–°äººå…¥èŒã€ç¯å¢ƒé‡å»ºã€æŒç»­é›†æˆ

---

## ğŸ¯ é…ç½®ç›®æ ‡

å®Œæˆæœ¬æŒ‡å—åï¼Œä½ å°†æ‹¥æœ‰ï¼š
- âœ… å®Œæ•´çš„åç«¯å¼€å‘ç¯å¢ƒï¼ˆPython 3.11 + PostgreSQL + Redisï¼‰
- âœ… å®Œæ•´çš„å‰ç«¯å¼€å‘ç¯å¢ƒï¼ˆNode.js 18 + React + TypeScriptï¼‰
- âœ… è´¨é‡é—¨ç¦å·¥å…·ï¼ˆmypy + pytest + ESLintï¼‰
- âœ… å¼€å‘è¾…åŠ©å·¥å…·ï¼ˆDocker + Git + IDEé…ç½®ï¼‰

**é¢„è®¡æ—¶é—´**: 2-3å°æ—¶ï¼ˆé¦–æ¬¡é…ç½®ï¼‰

---

## ğŸ“‹ ç¯å¢ƒè¦æ±‚æ€»è§ˆ

### å¿…éœ€ç¯å¢ƒ

| ç»„ä»¶ | ç‰ˆæœ¬ | ç”¨é€” | å®‰è£…ä¼˜å…ˆçº§ |
|------|------|------|-----------|
| **Python** | 3.11.x | åç«¯å¼€å‘ | ğŸ”´ P0 |
| **Node.js** | 18.x | å‰ç«¯å¼€å‘ | ğŸ”´ P0 |
| **PostgreSQL** | 15.x | æ•°æ®åº“ | ğŸ”´ P0 |
| **Redis** | 7.0+ | ç¼“å­˜/æ¶ˆæ¯é˜Ÿåˆ— | ğŸ”´ P0 |
| **Git** | 2.40+ | ç‰ˆæœ¬æ§åˆ¶ | ğŸ”´ P0 |

### æ¨èå·¥å…·

| å·¥å…· | ç‰ˆæœ¬ | ç”¨é€” | å®‰è£…ä¼˜å…ˆçº§ |
|------|------|------|-----------|
| **Docker** | 24.0+ | å®¹å™¨åŒ–ï¼ˆå¯é€‰ï¼‰ | ğŸŸ¡ P1 |
| **Docker Compose** | 2.20+ | å¤šå®¹å™¨ç¼–æ’ | ğŸŸ¡ P1 |
| **pyenv** | æœ€æ–° | Pythonç‰ˆæœ¬ç®¡ç† | ğŸŸ¢ P2 |
| **nvm** | æœ€æ–° | Nodeç‰ˆæœ¬ç®¡ç† | ğŸŸ¢ P2 |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3æ­¥ï¼‰

### Step 1: å®‰è£…åŸºç¡€ç¯å¢ƒ

**macOS**:
```bash
# ä½¿ç”¨ Homebrew
brew install python@3.11 node@18 postgresql@15 redis git

# éªŒè¯å®‰è£…
python3.11 --version  # Python 3.11.x
node --version         # v18.x.x
psql --version         # PostgreSQL 15.x
redis-server --version # Redis 7.0.x
git --version          # git 2.40+
```

**Ubuntu/Debian**:
```bash
# Python 3.11
sudo apt update
sudo apt install python3.11 python3.11-venv python3.11-dev

# Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install nodejs

# PostgreSQL 15
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
sudo apt update
sudo apt install postgresql-15

# Redis
sudo apt install redis-server

# Git
sudo apt install git
```

**Windows (WSL2æ¨è)**:
```bash
# å®‰è£… WSL2 åæŒ‰ Ubuntu æ­¥éª¤æ“ä½œ
# æˆ–ä½¿ç”¨ Windows Package Manager (winget)
winget install Python.Python.3.11
winget install OpenJS.NodeJS.LTS
# PostgreSQL å’Œ Redis å»ºè®®ä½¿ç”¨ Docker
```

---

### Step 2: å…‹éš†é¡¹ç›®å¹¶é…ç½®

```bash
# å…‹éš†é¡¹ç›®
cd ~/Desktop
git clone <repository-url> RedditSignalScanner
cd RedditSignalScanner

# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶
# å¦‚æœä½¿ç”¨é»˜è®¤é…ç½®ï¼Œæ— éœ€ä¿®æ”¹
```

---

### Step 3: å®‰è£…ä¾èµ–

```bash
# åç«¯ä¾èµ–
cd backend
python3.11 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# å‰ç«¯ä¾èµ–
cd ../frontend
npm install

# éªŒè¯å®‰è£…
cd ..
make env-check  # æ£€æŸ¥æ‰€æœ‰ç¯å¢ƒ
```

---

## ğŸ“¦ è¯¦ç»†ä¾èµ–æ¸…å•

### åç«¯ Python ä¾èµ– (requirements.txt)

```txt
# Webæ¡†æ¶
fastapi==0.104.1
uvicorn[standard]==0.24.0

# æ•°æ®åº“
sqlalchemy==2.0.23
alembic==1.12.0
asyncpg==0.29.0
psycopg2-binary==2.9.9

# æ•°æ®éªŒè¯
pydantic==2.5.0
pydantic-settings==2.1.0

# ä»»åŠ¡é˜Ÿåˆ—
celery==5.3.4
redis==5.0.1

# è®¤è¯
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
python-multipart==0.0.6

# HTTPå®¢æˆ·ç«¯
httpx==0.25.2
aiohttp==3.9.1

# å·¥å…·åº“
python-dotenv==1.0.0
pyyaml==6.0.1

# å¼€å‘å·¥å…·
mypy==1.7.0
pytest==7.4.3
pytest-cov==4.1.0
pytest-asyncio==0.21.1
black==23.11.0
isort==5.12.0
flake8==6.1.0
pre-commit==3.5.0

# ç±»å‹å­˜æ ¹
types-redis==4.6.0.11
types-python-jose==3.3.4.8
types-passlib==1.7.7.13
```

**å®‰è£…å‘½ä»¤**:
```bash
cd backend
python3.11 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

---

### å‰ç«¯ Node.js ä¾èµ– (package.json)

```json
{
  "name": "reddit-signal-scanner-frontend",
  "version": "0.1.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "type-check": "tsc --noEmit",
    "lint": "eslint src --ext ts,tsx",
    "test": "vitest"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.20.0",
    "axios": "^1.6.2"
  },
  "devDependencies": {
    "@types/react": "^18.2.43",
    "@types/react-dom": "^18.2.17",
    "@typescript-eslint/eslint-plugin": "^6.13.2",
    "@typescript-eslint/parser": "^6.13.2",
    "@vitejs/plugin-react": "^4.2.1",
    "eslint": "^8.55.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.5",
    "typescript": "^5.2.2",
    "vite": "^5.0.8",
    "vitest": "^1.0.4"
  }
}
```

**å®‰è£…å‘½ä»¤**:
```bash
cd frontend
npm install
# æˆ–ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
npm install -g pnpm
pnpm install
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶ç¤ºä¾‹

### 1. ç¯å¢ƒå˜é‡ (.env)

```bash
# ==========================================
# Reddit Signal Scanner ç¯å¢ƒé…ç½®
# ==========================================

# ========== åº”ç”¨é…ç½® ==========
APP_NAME=Reddit Signal Scanner
APP_ENV=development
DEBUG=true
LOG_LEVEL=INFO

# ========== æ•°æ®åº“é…ç½® ==========
# PostgreSQLè¿æ¥
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/reddit_scanner
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30

# ========== Redisé…ç½® ==========
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=50

# ========== Celeryé…ç½® ==========
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TASK_TRACK_STARTED=true
CELERY_TASK_TIME_LIMIT=300

# ========== APIé…ç½® ==========
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true
API_WORKERS=1

# ========== å®‰å…¨é…ç½® ==========
# ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼
SECRET_KEY=your-secret-key-change-in-production-min-32-chars
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# ========== CORSé…ç½® ==========
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# ========== å‰ç«¯é…ç½® ==========
VITE_API_URL=http://localhost:8000
VITE_USE_MOCK_API=false

# ========== Reddit APIé…ç½® ==========
REDDIT_CLIENT_ID=your_reddit_client_id
REDDIT_CLIENT_SECRET=your_reddit_client_secret
REDDIT_USER_AGENT=RedditSignalScanner/1.0

# ========== å¤–éƒ¨æœåŠ¡é…ç½® ==========
# OpenAI (å¯é€‰)
OPENAI_API_KEY=your_openai_api_key_if_needed

# ========== ç›‘æ§é…ç½® ==========
ENABLE_METRICS=true
METRICS_PORT=9090
```

---

### 2. MyPyé…ç½® (backend/mypy.ini)

```ini
[mypy]
# Pythonç‰ˆæœ¬
python_version = 3.11

# ä¸¥æ ¼æ¨¡å¼
strict = True
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_any_unimported = True
disallow_any_expr = False
disallow_any_decorated = False
disallow_any_explicit = True
disallow_any_generics = True
disallow_subclassing_any = True

# é”™è¯¯å¤„ç†
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True

# å¯¼å…¥å¤„ç†
ignore_missing_imports = False
follow_imports = normal

# è¾“å‡º
show_error_codes = True
show_column_numbers = True
pretty = True

# æ’ä»¶
plugins = pydantic.mypy

[pydantic-mypy]
init_forbid_extra = True
init_typed = True
warn_required_dynamic_aliases = True
```

---

### 3. Pytesté…ç½® (backend/pytest.ini)

```ini
[pytest]
# æµ‹è¯•è·¯å¾„
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# è¾“å‡ºé€‰é¡¹
addopts =
    -v
    --strict-markers
    --tb=short
    --cov=app
    --cov-report=term-missing
    --cov-report=html
    --cov-fail-under=80

# å¼‚æ­¥æ”¯æŒ
asyncio_mode = auto

# æ ‡è®°
markers =
    slow: æ…¢é€Ÿæµ‹è¯•ï¼ˆè¶…è¿‡1ç§’ï¼‰
    integration: é›†æˆæµ‹è¯•
    unit: å•å…ƒæµ‹è¯•
    smoke: å†’çƒŸæµ‹è¯•
```

---

### 4. Pre-commité…ç½® (.pre-commit-config.yaml)

```yaml
repos:
  # é€šç”¨æ£€æŸ¥
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-json
      - id: check-added-large-files
        args: ['--maxkb=500']
      - id: check-merge-conflict

  # Pythonæ ¼å¼åŒ–
  - repo: https://github.com/psf/black
    rev: 23.11.0
    hooks:
      - id: black
        language_version: python3.11
        args: ['--line-length=88']

  # Pythonå¯¼å…¥æ’åº
  - repo: https://github.com/pycqa/isort
    rev: 5.12.0
    hooks:
      - id: isort
        args: ['--profile=black']

  # Pythonç±»å‹æ£€æŸ¥
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.7.0
    hooks:
      - id: mypy
        args: ['--strict', '--config-file=backend/mypy.ini']
        additional_dependencies:
          - types-redis
          - types-python-jose
          - pydantic
        files: ^backend/

  # Pythonä»£ç æ£€æŸ¥
  - repo: https://github.com/pyfakes/flake8
    rev: 6.1.0
    hooks:
      - id: flake8
        args: ['--max-line-length=88', '--extend-ignore=E203']
        files: ^backend/
```

**å®‰è£…Pre-commit**:
```bash
pip install pre-commit
pre-commit install
```

---

### 5. TypeScripté…ç½® (frontend/tsconfig.json)

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "strictBindCallApply": true,
    "strictPropertyInitialization": true,
    "noImplicitThis": true,
    "alwaysStrict": true,

    /* Path mapping */
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

---

### 6. ESLinté…ç½® (frontend/.eslintrc.cjs)

```javascript
module.exports = {
  root: true,
  env: { browser: true, es2020: true },
  extends: [
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:react-hooks/recommended',
  ],
  ignorePatterns: ['dist', '.eslintrc.cjs'],
  parser: '@typescript-eslint/parser',
  plugins: ['react-refresh'],
  rules: {
    'react-refresh/only-export-components': [
      'warn',
      { allowConstantExport: true },
    ],
    '@typescript-eslint/no-explicit-any': 'error',
    '@typescript-eslint/explicit-function-return-type': 'warn',
  },
}
```

---

### 7. VSCodeé…ç½® (.vscode/settings.json)

```json
{
  "python.defaultInterpreterPath": "${workspaceFolder}/backend/venv/bin/python",
  "python.linting.enabled": true,
  "python.linting.mypyEnabled": true,
  "python.linting.mypyArgs": ["--strict", "--config-file=backend/mypy.ini"],
  "python.linting.flake8Enabled": true,
  "python.formatting.provider": "black",
  "python.formatting.blackArgs": ["--line-length=88"],

  "[python]": {
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
      "source.organizeImports": true
    },
    "editor.rulers": [88]
  },

  "[typescript]": {
    "editor.formatOnSave": true,
    "editor.defaultFormatter": "esbenp.prettier-vscode",
    "editor.rulers": [80]
  },

  "[typescriptreact]": {
    "editor.formatOnSave": true,
    "editor.defaultFormatter": "esbenp.prettier-vscode",
    "editor.rulers": [80]
  },

  "files.exclude": {
    "**/__pycache__": true,
    "**/*.pyc": true,
    "**/.pytest_cache": true,
    "**/.mypy_cache": true,
    "**/node_modules": true
  },

  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  }
}
```

---

## ğŸ³ Dockeré…ç½®ï¼ˆå¯é€‰ï¼‰

### Docker Compose (docker-compose.yml)

```yaml
version: '3.8'

services:
  # PostgreSQLæ•°æ®åº“
  postgres:
    image: postgres:15-alpine
    container_name: reddit_scanner_db
    environment:
      POSTGRES_DB: reddit_scanner
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_INITDB_ARGS: "-E UTF8 --locale=C"
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./docker/postgres/init.sql:/docker-entrypoint-initdb.d/init.sql
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 10s
      timeout: 5s
      retries: 5
    restart: unless-stopped

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    container_name: reddit_scanner_redis
    command: redis-server --appendonly yes
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 3s
      retries: 5
    restart: unless-stopped

  # åç«¯APIï¼ˆå¼€å‘æ¨¡å¼ï¼‰
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile.dev
    container_name: reddit_scanner_api
    command: uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
    ports:
      - "8000:8000"
    volumes:
      - ./backend:/app
    environment:
      - DATABASE_URL=postgresql+asyncpg://postgres:postgres@postgres:5432/reddit_scanner
      - REDIS_URL=redis://redis:6379/0
      - CELERY_BROKER_URL=redis://redis:6379/0
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    restart: unless-stopped

  # Celery Worker
  celery_worker:
    build:
      context: ./backend
      dockerfile: Dockerfile.dev
    container_name: reddit_scanner_worker
    command: celery -A app.core.celery_app worker --loglevel=info -Q analysis_queue,maintenance_queue,cleanup_queue,monitoring_queue
    volumes:
      - ./backend:/app
    environment:
      - DATABASE_URL=postgresql+asyncpg://postgres:postgres@postgres:5432/reddit_scanner
      - REDIS_URL=redis://redis:6379/0
      - CELERY_BROKER_URL=redis://redis:6379/0
    depends_on:
      - postgres
      - redis
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
```

### Dockeråç«¯é•œåƒ (backend/Dockerfile.dev)

```dockerfile
FROM python:3.11-slim

WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    gcc \
    postgresql-client \
    && rm -rf /var/lib/apt/lists/*

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY requirements.txt .

# å®‰è£…Pythonä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 8000

# é»˜è®¤å‘½ä»¤
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

### PostgreSQLåˆå§‹åŒ– (docker/postgres/init.sql)

```sql
-- åˆ›å»ºæ‰©å±•
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- åˆ›å»ºç´¢å¼•ï¼ˆAlembicä¼šå¤„ç†è¡¨åˆ›å»ºï¼‰
-- è¿™é‡Œåªåšåˆå§‹åŒ–å‡†å¤‡
```

---

## ğŸ”§ å®Œæ•´å®‰è£…æµç¨‹

### æ–¹å¼1: æœ¬åœ°ç¯å¢ƒï¼ˆæ¨èå¼€å‘ï¼‰

```bash
# 1. å®‰è£…åŸºç¡€ç¯å¢ƒ
brew install python@3.11 node@18 postgresql@15 redis

# 2. å¯åŠ¨æœåŠ¡
brew services start postgresql@15
brew services start redis

# 3. åˆ›å»ºæ•°æ®åº“
createdb reddit_scanner

# 4. å…‹éš†å¹¶é…ç½®é¡¹ç›®
git clone <repo> RedditSignalScanner
cd RedditSignalScanner
cp .env.example .env

# 5. åç«¯è®¾ç½®
cd backend
python3.11 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
alembic upgrade head

# 6. å‰ç«¯è®¾ç½®
cd ../frontend
npm install

# 7. å®‰è£…pre-commit
pip install pre-commit
pre-commit install

# 8. éªŒè¯ç¯å¢ƒ
cd ..
make env-check
```

---

### æ–¹å¼2: Dockerç¯å¢ƒï¼ˆæ¨èå¿«é€Ÿå¯åŠ¨ï¼‰

```bash
# 1. å®‰è£…Docker Desktop
# macOS: brew install --cask docker
# æˆ–ä» https://www.docker.com/products/docker-desktop ä¸‹è½½

# 2. å…‹éš†é¡¹ç›®
git clone <repo> RedditSignalScanner
cd RedditSignalScanner

# 3. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 4. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# 5. è¿è¡Œæ•°æ®åº“è¿ç§»
docker-compose exec backend alembic upgrade head

# 6. éªŒè¯æœåŠ¡
curl http://localhost:8000/health
curl http://localhost:8000/docs
```

---

## âœ… ç¯å¢ƒéªŒè¯

### è‡ªåŠ¨éªŒè¯è„šæœ¬

```bash
# ä½¿ç”¨é¡¹ç›®æä¾›çš„Makefile
make env-check

# é¢„æœŸè¾“å‡º
âœ“ Python 3.11.x found
âœ“ Node.js 18.x found
âœ“ PostgreSQL 15.x found
âœ“ Redis 7.0+ found
âœ“ Git 2.40+ found
âœ“ Backend dependencies installed
âœ“ Frontend dependencies installed
```

### æ‰‹åŠ¨éªŒè¯æ­¥éª¤

```bash
# 1. éªŒè¯Pythonç¯å¢ƒ
cd backend
source venv/bin/activate
python --version  # Python 3.11.x
mypy --version    # mypy 1.7.0
pytest --version  # pytest 7.4.3

# 2. éªŒè¯å‰ç«¯ç¯å¢ƒ
cd ../frontend
node --version    # v18.x.x
npm --version     # 9.x.x
npx tsc --version # Version 5.2.2

# 3. éªŒè¯æ•°æ®åº“è¿æ¥
psql reddit_scanner -c "SELECT version();"

# 4. éªŒè¯Redisè¿æ¥
redis-cli ping  # PONG

# 5. è¿è¡Œå¥åº·æ£€æŸ¥
cd ..
curl http://localhost:8000/health
```

---

## ğŸš¨ å¸¸è§é—®é¢˜

### 1. Pythonç‰ˆæœ¬ä¸åŒ¹é…

**é—®é¢˜**: `python3.11: command not found`

**è§£å†³**:
```bash
# macOS
brew install python@3.11
brew link python@3.11

# Ubuntu
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update
sudo apt install python3.11

# ä½¿ç”¨pyenvç®¡ç†ç‰ˆæœ¬
curl https://pyenv.run | bash
pyenv install 3.11.6
pyenv global 3.11.6
```

---

### 2. PostgreSQLè¿æ¥å¤±è´¥

**é—®é¢˜**: `could not connect to server`

**è§£å†³**:
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
brew services list  # macOS
sudo systemctl status postgresql  # Linux

# å¯åŠ¨æœåŠ¡
brew services start postgresql@15  # macOS
sudo systemctl start postgresql  # Linux

# æ£€æŸ¥ç«¯å£
lsof -i :5432

# é‡ç½®å¯†ç 
psql postgres
ALTER USER postgres PASSWORD 'postgres';
```

---

### 3. Redisè¿æ¥å¤±è´¥

**é—®é¢˜**: `Connection refused`

**è§£å†³**:
```bash
# å¯åŠ¨Redis
brew services start redis  # macOS
sudo systemctl start redis  # Linux

# æµ‹è¯•è¿æ¥
redis-cli ping

# æŸ¥çœ‹é…ç½®
redis-cli config get "*"
```

---

### 4. Node.jsç‰ˆæœ¬é—®é¢˜

**é—®é¢˜**: ç‰ˆæœ¬ä¸åŒ¹é…æˆ–npmå®‰è£…å¤±è´¥

**è§£å†³**:
```bash
# ä½¿ç”¨nvmç®¡ç†ç‰ˆæœ¬
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18
nvm use 18

# æ¸…é™¤npmç¼“å­˜
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

---

### 5. Dockerå®¹å™¨æ— æ³•å¯åŠ¨

**é—®é¢˜**: `Error starting userland proxy`

**è§£å†³**:
```bash
# åœæ­¢æ‰€æœ‰å®¹å™¨
docker-compose down

# æ¸…ç†ç«¯å£
make kill-port-5432
make kill-port-6379
make kill-port-8000

# é‡æ–°å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

---

### 6. Pre-commitæ£€æŸ¥å¤±è´¥

**é—®é¢˜**: `mypy` æˆ– `black` å¤±è´¥

**è§£å†³**:
```bash
# æ›´æ–°pre-commit hooks
pre-commit autoupdate

# æ‰‹åŠ¨è¿è¡Œä¿®å¤
black backend/app
isort backend/app

# è·³è¿‡æ£€æŸ¥ï¼ˆä¸æ¨èï¼‰
git commit --no-verify
```

---

## ğŸ“š ç¯å¢ƒé…ç½®æ£€æŸ¥æ¸…å•

### Day 0 å®Œæ•´æ£€æŸ¥

```bash
# ========== åŸºç¡€ç¯å¢ƒ ==========
â–¡ Python 3.11 å·²å®‰è£…
â–¡ Node.js 18 å·²å®‰è£…
â–¡ PostgreSQL 15 å·²å®‰è£…å¹¶å¯åŠ¨
â–¡ Redis 7 å·²å®‰è£…å¹¶å¯åŠ¨
â–¡ Git 2.40+ å·²å®‰è£…

# ========== é¡¹ç›®è®¾ç½® ==========
â–¡ é¡¹ç›®å·²å…‹éš†
â–¡ .env æ–‡ä»¶å·²é…ç½®
â–¡ åç«¯venvå·²åˆ›å»º
â–¡ åç«¯ä¾èµ–å·²å®‰è£… (pip install -r requirements.txt)
â–¡ å‰ç«¯ä¾èµ–å·²å®‰è£… (npm install)

# ========== æ•°æ®åº“ ==========
â–¡ æ•°æ®åº“ reddit_scanner å·²åˆ›å»º
â–¡ Alembicè¿ç§»å·²è¿è¡Œ (alembic upgrade head)
â–¡ æ•°æ®åº“è¿æ¥æµ‹è¯•é€šè¿‡

# ========== å¼€å‘å·¥å…· ==========
â–¡ Pre-commitå·²å®‰è£… (pre-commit install)
â–¡ VSCodeé…ç½®å·²æ·»åŠ  (.vscode/settings.json)
â–¡ MyPyé…ç½®å·²æ·»åŠ  (backend/mypy.ini)
â–¡ Pytesté…ç½®å·²æ·»åŠ  (backend/pytest.ini)

# ========== éªŒè¯æµ‹è¯• ==========
â–¡ make env-check é€šè¿‡
â–¡ curl http://localhost:8000/health æˆåŠŸ
â–¡ mypy --strict backend/app é€šè¿‡
â–¡ pytest backend/tests é€šè¿‡
â–¡ npm run type-check é€šè¿‡
â–¡ npm run lint é€šè¿‡
```

---

## ğŸ“ ç¯å¢ƒç®¡ç†æœ€ä½³å®è·µ

### 1. ç‰ˆæœ¬é”å®šç­–ç•¥

```bash
# Pythonä¾èµ–é”å®š
pip freeze > requirements.txt

# å‰ç«¯ä¾èµ–é”å®š
npm install  # è‡ªåŠ¨ç”Ÿæˆ package-lock.json
# æˆ–
pnpm install  # è‡ªåŠ¨ç”Ÿæˆ pnpm-lock.yaml

# æäº¤åˆ°Git
git add requirements.txt package-lock.json
```

---

### 2. ç¯å¢ƒéš”ç¦»

```bash
# æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹è™šæ‹Ÿç¯å¢ƒ
python3.11 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„Python
which python  # åº”è¯¥æŒ‡å‘venv/bin/python
```

---

### 3. ç¯å¢ƒå˜é‡ç®¡ç†

```bash
# å¼€å‘ç¯å¢ƒ
cp .env.example .env.development

# æµ‹è¯•ç¯å¢ƒ
cp .env.example .env.test

# ç”Ÿäº§ç¯å¢ƒï¼ˆæ•æ„Ÿä¿¡æ¯ä¸æäº¤ï¼‰
cp .env.example .env.production

# åœ¨.gitignoreä¸­å¿½ç•¥
echo ".env*" >> .gitignore
echo "!.env.example" >> .gitignore
```

---

### 4. ä¾èµ–æ›´æ–°ç­–ç•¥

```bash
# æ£€æŸ¥è¿‡æ—¶ä¾èµ–
pip list --outdated
npm outdated

# å®‰å…¨æ›´æ–°
pip install --upgrade pip
npm audit fix

# ä¸»ç‰ˆæœ¬æ›´æ–°ï¼ˆè°¨æ…ï¼‰
# åœ¨ç‹¬ç«‹åˆ†æ”¯æµ‹è¯•åå†åˆå¹¶
git checkout -b upgrade-dependencies
pip install --upgrade <package>
npm update
```

---

## ğŸ”„ ç¯å¢ƒç»´æŠ¤

### æ¯å‘¨ç»´æŠ¤ä»»åŠ¡

```bash
# æ¸…ç†Pythonç¼“å­˜
find . -type d -name __pycache__ -exec rm -rf {} +
find . -type f -name "*.pyc" -delete

# æ¸…ç†Nodeç¼“å­˜
npm cache clean --force

# æ›´æ–°pre-commit hooks
pre-commit autoupdate

# æ£€æŸ¥ä¾èµ–å®‰å…¨æ€§
pip-audit  # éœ€å®‰è£…: pip install pip-audit
npm audit
```

---

### æ¯æœˆç»´æŠ¤ä»»åŠ¡

```bash
# ä¾èµ–å‡çº§
pip list --outdated
npm outdated

# æ•°æ®åº“ä¼˜åŒ–
psql reddit_scanner -c "VACUUM ANALYZE;"

# Dockeræ¸…ç†
docker system prune -a
```

---

## ğŸ“ è·å–å¸®åŠ©

### ç¯å¢ƒé—®é¢˜æ’æŸ¥

1. **æŸ¥çœ‹æ—¥å¿—**: æ£€æŸ¥æœåŠ¡å¯åŠ¨æ—¥å¿—
2. **æ£€æŸ¥ç«¯å£**: `lsof -i :8000` / `lsof -i :5432`
3. **éªŒè¯é…ç½®**: ç¡®è®¤.envæ–‡ä»¶æ­£ç¡®
4. **é‡å¯æœåŠ¡**: `make dev-down && make dev-up`
5. **å¯»æ±‚å¸®åŠ©**: åˆ›å»ºIssueæˆ–è”ç³»å›¢é˜Ÿ

---

**ç¯å¢ƒé…ç½®å®Œæˆåï¼Œè¯·ç»§ç»­é˜…è¯»**: [3äººå¹¶è¡Œå¼€å‘æ–¹æ¡ˆ](./2025-10-10-3äººå¹¶è¡Œå¼€å‘æ–¹æ¡ˆ.md)

---

æœ€åæ›´æ–°: 2025-10-10
ç»´æŠ¤è€…: Reddit Signal Scanner å¼€å‘å›¢é˜Ÿ
