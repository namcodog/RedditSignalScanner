# Reddit Signal Scanner - æœ¬åœ°å¯åŠ¨æŒ‡å—

**ç›®æ ‡**: åç«¯è¿è¡Œåœ¨ `http://localhost:8006`ï¼Œå‰ç«¯è¿è¡Œåœ¨ `http://localhost:3006`

---

## ğŸ“‹ å‰ç½®å‡†å¤‡

### 1. ç¯å¢ƒè¦æ±‚

- **Python**: 3.11ï¼ˆæ¨èä½¿ç”¨ Homebrew å®‰è£…ï¼‰
- **Node.js**: 16+ å’Œ npm
- **PostgreSQL**: 14+ï¼ˆæœ¬åœ°è¿è¡Œï¼‰
- **Redis**: 6+ï¼ˆæœ¬åœ°è¿è¡Œï¼‰

### 2. æ£€æŸ¥ç¯å¢ƒ

```bash
# æ£€æŸ¥ Python ç‰ˆæœ¬
/opt/homebrew/bin/python3.11 --version
# åº”è¾“å‡º: Python 3.11.x

# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node --version
# åº”è¾“å‡º: v16.x.x æˆ–æ›´é«˜

# æ£€æŸ¥ PostgreSQL æ˜¯å¦è¿è¡Œ
psql --version
pg_isready

# æ£€æŸ¥ Redis æ˜¯å¦å®‰è£…
redis-cli --version
```

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰

### æ–¹å¼ä¸€ï¼šä¸€é”®é»„é‡‘è·¯å¾„ï¼ˆè‡ªåŠ¨å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼‰

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
make dev-golden-path
```

**è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ­¥éª¤**ï¼š
1. å¯åŠ¨ Redis æœåŠ¡
2. å¡«å…… Redis æµ‹è¯•æ•°æ®
3. å¯åŠ¨ Celery Workerï¼ˆåå°ä»»åŠ¡å¤„ç†ï¼‰
4. å¯åŠ¨åç«¯æœåŠ¡ï¼ˆFastAPIï¼Œç«¯å£ 8006ï¼‰
5. åˆ›å»ºæµ‹è¯•ç”¨æˆ·å’Œä»»åŠ¡
6. å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆViteï¼Œç«¯å£ 3006ï¼‰

**å¯åŠ¨æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°**ï¼š
```
âœ… é»„é‡‘è·¯å¾„å¯åŠ¨å®Œæˆï¼

ğŸ“Š æœåŠ¡çŠ¶æ€ï¼š
   Redis:    âœ… redis://localhost:6379
   Celery:   âœ… tail -f /tmp/celery_worker.log
   Backend:  âœ… http://localhost:8006
   Frontend: âœ… http://localhost:3006

ğŸ”— å¿«é€Ÿè®¿é—®ï¼š
   å‰ç«¯é¦–é¡µ:  http://localhost:3006/
   API æ–‡æ¡£:  http://localhost:8006/docs
```

**éªŒæ”¶æ­¥éª¤**ï¼š
1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3006/`ï¼ˆå‰ç«¯é¦–é¡µï¼‰
2. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8006/docs`ï¼ˆåç«¯ API æ–‡æ¡£ï¼‰
3. åœ¨å‰ç«¯è¾“å…¥äº§å“æè¿°ï¼Œæäº¤åˆ†æä»»åŠ¡
4. æŸ¥çœ‹å®æ—¶è¿›åº¦å’Œåˆ†ææŠ¥å‘Š

---

## ğŸ”§ æ‰‹åŠ¨å¯åŠ¨ï¼ˆåˆ†æ­¥æ§åˆ¶ï¼‰

å¦‚æœä½ æƒ³æ›´ç²¾ç»†åœ°æ§åˆ¶å¯åŠ¨è¿‡ç¨‹ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨å¯åŠ¨ï¼š

### æ­¥éª¤ 1: å¯åŠ¨ PostgreSQL

```bash
# å¦‚æœä½¿ç”¨ Homebrew å®‰è£…çš„ PostgreSQL
brew services start postgresql@14

# åˆ›å»ºæ•°æ®åº“ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
createdb reddit_scanner

# éªŒè¯æ•°æ®åº“è¿æ¥
psql -d reddit_scanner -c "SELECT version();"
```

### æ­¥éª¤ 2: å¯åŠ¨ Redis

```bash
# å¯åŠ¨ Redis æœåŠ¡
make redis-start

# éªŒè¯ Redis è¿æ¥
redis-cli ping
# åº”è¾“å‡º: PONG
```

### æ­¥éª¤ 3: æ•°æ®åº“è¿ç§»

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# è¿è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head

# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ..
```

### æ­¥éª¤ 4: å¯åŠ¨ Celery Worker

```bash
# å¯åŠ¨ Celery Workerï¼ˆåå°ä»»åŠ¡å¤„ç†ï¼‰
make celery-start
```

**æ³¨æ„**: Celery Worker ä¼šåœ¨å‰å°è¿è¡Œï¼Œä½ éœ€è¦æ–°å¼€ä¸€ä¸ªç»ˆç«¯ç»§ç»­åç»­æ­¥éª¤ã€‚

æˆ–è€…ä½¿ç”¨åå°å¯åŠ¨ï¼š
```bash
make celery-restart
```

### æ­¥éª¤ 5: å¯åŠ¨åç«¯æœåŠ¡

**æ–°å¼€ä¸€ä¸ªç»ˆç«¯**ï¼Œæ‰§è¡Œï¼š

```bash
# å¯åŠ¨åç«¯æœåŠ¡ï¼ˆFastAPIï¼Œç«¯å£ 8006ï¼‰
make dev-backend
```

**éªŒè¯åç«¯å¯åŠ¨æˆåŠŸ**ï¼š
- æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8006/docs`
- ä½ åº”è¯¥çœ‹åˆ° FastAPI çš„ Swagger æ–‡æ¡£é¡µé¢

### æ­¥éª¤ 6: å¯åŠ¨å‰ç«¯æœåŠ¡

**å†æ–°å¼€ä¸€ä¸ªç»ˆç«¯**ï¼Œæ‰§è¡Œï¼š

```bash
# å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆViteï¼Œç«¯å£ 3006ï¼‰
make dev-frontend
```

**éªŒè¯å‰ç«¯å¯åŠ¨æˆåŠŸ**ï¼š
- æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3006/`
- ä½ åº”è¯¥çœ‹åˆ° Reddit Signal Scanner çš„é¦–é¡µ

---

## ğŸ§ª åˆ›å»ºæµ‹è¯•æ•°æ®ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³æµ‹è¯•å®Œæ•´æµç¨‹ï¼Œå¯ä»¥åˆ›å»ºæµ‹è¯•ç”¨æˆ·å’Œä»»åŠ¡ï¼š

```bash
# åˆ›å»ºæµ‹è¯•ç”¨æˆ·å’Œä»»åŠ¡
make db-seed-user-task
```

è¿™ä¼šåˆ›å»ºï¼š
- æµ‹è¯•ç”¨æˆ·é‚®ç®±: `prd-test@example.com`
- ä¸€ä¸ªå·²å®Œæˆçš„åˆ†æä»»åŠ¡

---

## ğŸ“Š æŸ¥çœ‹æœåŠ¡çŠ¶æ€

### æ£€æŸ¥æ‰€æœ‰æœåŠ¡æ˜¯å¦è¿è¡Œ

```bash
# æ£€æŸ¥ Redis
redis-cli ping

# æ£€æŸ¥ PostgreSQL
pg_isready

# æ£€æŸ¥åç«¯æœåŠ¡
curl http://localhost:8006/

# æ£€æŸ¥å‰ç«¯æœåŠ¡
curl http://localhost:3006/

# æ£€æŸ¥ Celery Worker
tail -f /tmp/celery_worker.log
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# Celery Worker æ—¥å¿—
tail -f /tmp/celery_worker.log

# åç«¯æ—¥å¿—ï¼ˆå¦‚æœä½¿ç”¨é»„é‡‘è·¯å¾„å¯åŠ¨ï¼‰
tail -f /tmp/backend_uvicorn.log

# å‰ç«¯æ—¥å¿—ï¼ˆå¦‚æœä½¿ç”¨é»„é‡‘è·¯å¾„å¯åŠ¨ï¼‰
tail -f /tmp/frontend_vite.log
```

---

## ğŸ›‘ åœæ­¢æœåŠ¡

### åœæ­¢æ‰€æœ‰æœåŠ¡ï¼ˆä¸€é”®æ¸…ç†ï¼‰

```bash
# åœæ­¢æ‰€æœ‰ç«¯å£å’ŒæœåŠ¡
make kill-ports && make kill-celery && make kill-redis
```

### åˆ†åˆ«åœæ­¢æœåŠ¡

```bash
# åœæ­¢åç«¯æœåŠ¡ï¼ˆç«¯å£ 8006ï¼‰
make kill-backend-port

# åœæ­¢å‰ç«¯æœåŠ¡ï¼ˆç«¯å£ 3006ï¼‰
make kill-frontend-port

# åœæ­¢ Celery Worker
make kill-celery

# åœæ­¢ Redis
make kill-redis

# åœæ­¢ PostgreSQLï¼ˆHomebrewï¼‰
brew services stop postgresql@14
```

---

## âŒ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**: `Address already in use` æˆ– `Port 8006/3006 is already allocated`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†è¢«å ç”¨çš„ç«¯å£
make kill-ports

# æˆ–è€…æ‰‹åŠ¨æ¸…ç†ç‰¹å®šç«¯å£
lsof -ti:8006 | xargs kill -9  # æ¸…ç†åç«¯ç«¯å£
lsof -ti:3006 | xargs kill -9  # æ¸…ç†å‰ç«¯ç«¯å£
```

### é—®é¢˜ 2: PostgreSQL è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: `could not connect to server: Connection refused`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ PostgreSQL æ˜¯å¦è¿è¡Œ
pg_isready

# å¦‚æœæœªè¿è¡Œï¼Œå¯åŠ¨ PostgreSQL
brew services start postgresql@14

# æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
psql -l | grep reddit_scanner

# å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºæ•°æ®åº“
createdb reddit_scanner
```

### é—®é¢˜ 3: Redis è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: `Error connecting to Redis`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å¯åŠ¨ Redis
make redis-start

# éªŒè¯ Redis è¿æ¥
redis-cli ping
```

### é—®é¢˜ 4: Celery Worker å¯åŠ¨å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: `celery: command not found` æˆ– Worker æ— æ³•è¿æ¥åˆ° Redis

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ backend/.env æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la backend/.env

# æ£€æŸ¥ Redis æ˜¯å¦è¿è¡Œ
redis-cli ping

# æŸ¥çœ‹ Celery Worker æ—¥å¿—
tail -f /tmp/celery_worker.log

# é‡å¯ Celery Worker
make celery-restart
```

### é—®é¢˜ 5: å‰ç«¯ä¾èµ–æœªå®‰è£…

**é”™è¯¯ä¿¡æ¯**: `Cannot find module` æˆ– `npm ERR!`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
npm install
cd ..
```

### é—®é¢˜ 6: åç«¯ä¾èµ–æœªå®‰è£…

**é”™è¯¯ä¿¡æ¯**: `ModuleNotFoundError: No module named 'xxx'`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å®‰è£…åç«¯ä¾èµ–
cd backend
/opt/homebrew/bin/python3.11 -m pip install -r requirements.txt
cd ..
```

---

## ğŸ¯ éªŒæ”¶æ£€æŸ¥æ¸…å•

åœ¨ä½ éªŒæ”¶ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä»¥ä¸‹æ‰€æœ‰é¡¹éƒ½æ­£å¸¸ï¼š

### åç«¯éªŒæ”¶ï¼ˆhttp://localhost:8006ï¼‰

- [ ] è®¿é—® `http://localhost:8006/` è¿”å› `{"message": "Reddit Signal Scanner API"}`
- [ ] è®¿é—® `http://localhost:8006/docs` æ˜¾ç¤º Swagger API æ–‡æ¡£
- [ ] è®¿é—® `http://localhost:8006/openapi.json` è¿”å› OpenAPI è§„èŒƒ
- [ ] API æ–‡æ¡£ä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ç«¯ç‚¹ï¼š
  - `POST /api/tasks/` - åˆ›å»ºåˆ†æä»»åŠ¡
  - `GET /api/tasks/{task_id}` - è·å–ä»»åŠ¡çŠ¶æ€
  - `GET /api/tasks/{task_id}/report` - è·å–åˆ†ææŠ¥å‘Š
  - `GET /api/tasks/{task_id}/stream` - SSE å®æ—¶è¿›åº¦

### å‰ç«¯éªŒæ”¶ï¼ˆhttp://localhost:3006ï¼‰

- [ ] è®¿é—® `http://localhost:3006/` æ˜¾ç¤ºé¦–é¡µ
- [ ] é¦–é¡µæœ‰äº§å“æè¿°è¾“å…¥æ¡†
- [ ] é¦–é¡µæœ‰æäº¤æŒ‰é’®
- [ ] å¯ä»¥è¾“å…¥äº§å“æè¿°å¹¶æäº¤
- [ ] æäº¤åè·³è½¬åˆ°ç­‰å¾…é¡µé¢
- [ ] ç­‰å¾…é¡µé¢æ˜¾ç¤ºå®æ—¶è¿›åº¦
- [ ] åˆ†æå®Œæˆåè·³è½¬åˆ°æŠ¥å‘Šé¡µé¢

### æœåŠ¡éªŒæ”¶

- [ ] Redis è¿è¡Œæ­£å¸¸ï¼ˆ`redis-cli ping` è¿”å› `PONG`ï¼‰
- [ ] PostgreSQL è¿è¡Œæ­£å¸¸ï¼ˆ`pg_isready` è¿”å› `accepting connections`ï¼‰
- [ ] Celery Worker è¿è¡Œæ­£å¸¸ï¼ˆ`tail -f /tmp/celery_worker.log` æ˜¾ç¤º `ready`ï¼‰
- [ ] åç«¯æœåŠ¡è¿è¡Œæ­£å¸¸ï¼ˆç«¯å£ 8006ï¼‰
- [ ] å‰ç«¯æœåŠ¡è¿è¡Œæ­£å¸¸ï¼ˆç«¯å£ 3006ï¼‰

---

## ğŸ“ ç¯å¢ƒå˜é‡é…ç½®

### backend/.env

ç¡®ä¿ `backend/.env` æ–‡ä»¶åŒ…å«ä»¥ä¸‹é…ç½®ï¼š

```bash
# Reddit APIå‡­è¯
REDDIT_CLIENT_ID=USCPQ5QL140Sox3R09YZ1Q
REDDIT_CLIENT_SECRET=e7vTRMdXJIAAgvErHQwfwYpRaen0SQ

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql+psycopg://postgres:postgres@localhost:5432/reddit_scanner

# Redisé…ç½®
REDIS_URL=redis://localhost:6379/5

# Celeryé…ç½®
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Admin é‚®ç®±ç™½åå•
ADMIN_EMAILS=prd-test@example.com

# åº”ç”¨è¿è¡Œç¯å¢ƒ
APP_ENV=development
```

**æ³¨æ„**: å¦‚æœä½ çš„ PostgreSQL ç”¨æˆ·å/å¯†ç ä¸æ˜¯ `postgres/postgres`ï¼Œè¯·ä¿®æ”¹ `DATABASE_URL`ã€‚

---

## ğŸ”— å¿«é€Ÿè®¿é—®é“¾æ¥

å¯åŠ¨æˆåŠŸåï¼Œä½ å¯ä»¥è®¿é—®ä»¥ä¸‹é“¾æ¥ï¼š

- **å‰ç«¯é¦–é¡µ**: http://localhost:3006/
- **åç«¯ API æ–‡æ¡£**: http://localhost:8006/docs
- **åç«¯ OpenAPI è§„èŒƒ**: http://localhost:8006/openapi.json
- **åç«¯å¥åº·æ£€æŸ¥**: http://localhost:8006/

---

## ğŸ’¡ æç¤º

1. **é¦–æ¬¡å¯åŠ¨å»ºè®®ä½¿ç”¨é»„é‡‘è·¯å¾„**: `make dev-golden-path` ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰é…ç½®
2. **æŸ¥çœ‹å®æ—¶æ—¥å¿—**: ä½¿ç”¨ `tail -f /tmp/celery_worker.log` æŸ¥çœ‹ä»»åŠ¡å¤„ç†æ—¥å¿—
3. **åœæ­¢æœåŠ¡**: ä½¿ç”¨ `make kill-ports && make kill-celery && make kill-redis` ä¸€é”®åœæ­¢æ‰€æœ‰æœåŠ¡
4. **é‡å¯æœåŠ¡**: å…ˆåœæ­¢æ‰€æœ‰æœåŠ¡ï¼Œå†é‡æ–°è¿è¡Œ `make dev-golden-path`

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿç°åœ¨å°±è¿è¡Œ `make dev-golden-path` å¼€å§‹éªŒæ”¶å§ï¼** ğŸš€

