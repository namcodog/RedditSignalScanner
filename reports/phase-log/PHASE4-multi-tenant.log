PYTEST SESSION START (diagnostic)
============================= test session starts ==============================
platform darwin -- Python 3.11.13, pytest-8.4.2, pluggy-1.6.0
rootdir: /Users/hujia/Desktop/RedditSignalScanner/backend
configfile: pytest.ini
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1 item

tests/e2e/test_multi_tenant_isolation.py::test_multi_tenant_access_isolated 
-------------------------------- live log call ---------------------------------
INFO     httpx:_client.py:1740 HTTP Request: POST http://testserver/api/auth/register "HTTP/1.1 201 Created"
INFO     httpx:_client.py:1740 HTTP Request: POST http://testserver/api/auth/login "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1740 HTTP Request: POST http://testserver/api/auth/register "HTTP/1.1 201 Created"
INFO     httpx:_client.py:1740 HTTP Request: POST http://testserver/api/auth/login "HTTP/1.1 200 OK"
INFO     app.api.routes.analyze:analyze.py:42 Environment test running analysis task 8b7d991a-8732-4eab-8cb5-3c78e157bb49 inline (Celery bypass for local/dev).
INFO     httpx:_client.py:1740 HTTP Request: POST http://testserver/api/analyze "HTTP/1.1 201 Created"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/status/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/report/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 409 Conflict"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/status/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/status/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 403 Forbidden"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/report/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 403 Forbidden"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/status/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/status/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 401 Unauthorized"
PASSED

=============================== warnings summary ===============================
tests/e2e/test_multi_tenant_isolation.py::test_multi_tenant_access_isolated
  /Users/hujia/Desktop/RedditSignalScanner/venv/lib/python3.11/site-packages/starlette/formparsers.py:10: PendingDeprecationWarning: Please use `import python_multipart` instead.
    import multipart

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
==================================== PASSES ====================================
______________________ test_multi_tenant_access_isolated _______________________
------------------------------ Captured log call -------------------------------
INFO     httpx:_client.py:1740 HTTP Request: POST http://testserver/api/auth/register "HTTP/1.1 201 Created"
INFO     httpx:_client.py:1740 HTTP Request: POST http://testserver/api/auth/login "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1740 HTTP Request: POST http://testserver/api/auth/register "HTTP/1.1 201 Created"
INFO     httpx:_client.py:1740 HTTP Request: POST http://testserver/api/auth/login "HTTP/1.1 200 OK"
INFO     app.api.routes.analyze:analyze.py:42 Environment test running analysis task 8b7d991a-8732-4eab-8cb5-3c78e157bb49 inline (Celery bypass for local/dev).
INFO     httpx:_client.py:1740 HTTP Request: POST http://testserver/api/analyze "HTTP/1.1 201 Created"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/status/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/report/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 409 Conflict"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/status/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/status/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 403 Forbidden"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/report/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 403 Forbidden"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/status/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 200 OK"
INFO     httpx:_client.py:1740 HTTP Request: GET http://testserver/api/status/8b7d991a-8732-4eab-8cb5-3c78e157bb49 "HTTP/1.1 401 Unauthorized"
=========================== short test summary info ============================
PASSED tests/e2e/test_multi_tenant_isolation.py::test_multi_tenant_access_isolated
========================= 1 passed, 1 warning in 1.42s =========================
